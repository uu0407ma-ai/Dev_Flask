## 设置

### 1. 安装依赖

在项目根目录下运行以下命令安装必要的依赖：

```
bash复制编辑
pip install flask-migrate
pip install flask-mail
pip install flask-wtf
pip install email_validator
```

### 2. 数据库迁移

初始化并应用数据库迁移：

```
bash复制编辑# 初始化迁移
flask db init

# 生成迁移文件
flask db migrate

# 应用迁移
flask db upgrade
```

------

## 功能实现

### [电子邮件验证](#email-verification-and-database)

#### 1. 配置 Flask-Mail

- 在应用配置中配置电子邮件服务。
- 在扩展中初始化 Flask-Mail。
- 在 `auth.py` 中创建发送邮件的视图函数。
- 测试邮件功能确保正常发送。

#### 2. 电子邮件验证与数据库

- 在数据库中存储验证代码（修改数据库模型）。
- 完成三步迁移：初始化、生成、应用迁移。
- 使用 JSON 格式返回电子邮件验证的 AJAX 响应。

#### 3. 前端实现

- 更新 HTML 路径。
- 集成前端 AJAX 功能。
- 实现邮箱验证码倒计时功能。

------

### [表单验证](#user-authentication)

#### 1. 配置 Flask-WTF

- 使用 **Flask-WTF** 创建表单验证。
- 使用 **Email Validator** 包进行邮箱格式验证。

------

### [用户身份验证](#question-and-answer-functionalities)

#### 1. 登录功能

- 修改数据库登录表的表单。
- 更新身份验证函数。
- 配置会话管理和登录功能密钥。

#### 2. 钩子和身份验证

- 在 `app.py` 中实现两个钩子函数，用于在已登录和未登录状态之间切换。

#### 3. 注销功能

- 创建注销页面的视图函数，实现用户登出功能。

------

### [问答功能](#troubleshooting-css-loading-issues)

#### 1. 创建问答视图和页面

- 实现发布问题和答案的视图函数与 HTML 页面。
- 修改问答功能相关数据库模型。
- 使用装饰器验证用户登录状态，确保只有登录用户能够发布问题。

#### 2. 渲染问答模板

- 更新 `index.html` 和相关视图函数，渲染问题和答案列表。
- 修复问答部分的头像图片路径。

#### 3. 实现问答详情页

- 更新 `detail.html` 和问题详情页视图函数。
- 在主页上实现从问题列表到问题详情页的导航。

#### 4. 解决 CSS 加载问题

- 确认 CSS 文件加载路径。
- 使用 `url_for` 替代相对路径解决静态文件加载问题。

------

### [模型修正与答案提交](#submission-error-correction)

#### 1. 解决数据库表创建问题

- 解决数据库表创建时出现的错误。
- 删除现有数据库并重新迁移，以解决结构性问题。

#### 2. 修改模型

- 修正 `author` 字段的模型问题，确保正确关联作者。

#### 3. 调整密码字段长度

- 解决密码字段长度限制导致的错误。
- 在模型中修改密码字段的长度并进行迁移。

#### 4. 修正提交错误

- 修正视图函数中缺失的 `return` 语句，解决提交错误问题。

#### 5. 实现答案提交

- 后端：验证提交答案的表单和视图函数。
- 前端：更新问题详情页面以渲染答案列表。

#### 6. 搜索功能

- 后端：在问答模块中实现搜索功能。
- 前端：更新 HTML 模板以支持搜索功能。

------

### [其他任务](#project-completion)

- 改进提交信息，并记录先前修复的错误。
- 编写英文版的 Markdown 文档。

------

### [项目完成](#中文版)

通过实现所有功能，项目最终完成。以下是相关链接：

- 视频教程：[点击观看](https://www.bilibili.com/video/BV17r4y1y7jJ?p=41&vd_source=1a0df84062fc3afe05ddb5436ffce988)

------

这个结构化的 README 文件不仅提供了项目的详细步骤，还方便用户快速导航到感兴趣的部分，提升了可读性和可操作性。如果你有任何问题或建议，欢迎提交 Issue 或 Pull Request！